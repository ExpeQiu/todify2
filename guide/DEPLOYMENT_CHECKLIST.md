# Todify2 部署检查清单

## 📋 部署前检查

### 环境准备
- [ ] 服务器操作系统确认 (Ubuntu/CentOS)
- [ ] Node.js 版本确认 (v18+)
- [ ] Nginx 安装确认
- [ ] 网络端口开放确认 (8088)
- [ ] 磁盘空间充足 (至少10GB)

### 代码准备
- [ ] 项目代码完整上传
- [ ] 前端代码 (`frontend/` 目录)
- [ ] 后端代码 (`backend/` 目录)
- [ ] Nginx配置文件 (`nginx-proxy.conf`)
- [ ] 部署脚本 (`quick-deploy.sh`)

## 🔧 配置检查

### 后端配置
- [ ] `.env` 文件创建
- [ ] `PORT=3003` 设置正确
- [ ] Dify API URL 配置正确
- [ ] API 密钥配置完整
- [ ] 数据库路径配置正确

### 前端配置
- [ ] `configService.ts` API URL 指向8088端口
- [ ] 所有Dify配置使用代理URL
- [ ] 超时设置合理 (120秒/90秒)

### Nginx配置
- [ ] 配置文件创建 (`/etc/nginx/sites-available/todify2`)
- [ ] 前端代理到3001端口
- [ ] API代理到3003端口
- [ ] WebSocket支持配置

## 🚀 部署执行

### 依赖安装
- [ ] 前端依赖安装 (`npm install`)
- [ ] 后端依赖安装 (`npm install`)
- [ ] 依赖安装无错误

### 服务启动
- [ ] 后端服务启动 (端口3003)
- [ ] 前端服务启动 (端口3001)
- [ ] Nginx服务启动 (端口8088)
- [ ] 所有服务监听0.0.0.0

### 服务管理
- [ ] 服务管理脚本创建
- [ ] 自动启动配置
- [ ] 进程监控设置

## ✅ 功能验证

### 基础功能
- [ ] 前端页面正常加载
- [ ] 路由跳转正常
- [ ] 静态资源加载正常

### API功能
- [ ] 健康检查API正常 (`/api/health`)
- [ ] Dify聊天代理正常 (`/api/dify/chat-messages`)
- [ ] Dify工作流代理正常 (`/api/dify/workflows/run`)

### 核心功能
- [ ] AI问答功能正常
- [ ] 智能搜索功能正常
- [ ] 技术包装功能正常
- [ ] 技术策略功能正常
- [ ] 技术通稿功能正常
- [ ] 演讲稿生成功能正常

### 统计功能
- [ ] 工作流统计页面正常
- [ ] 数据收集功能正常
- [ ] 图表渲染正常

## 🔍 性能检查

### 响应时间
- [ ] 页面加载时间 < 3秒
- [ ] API响应时间 < 2秒
- [ ] Dify API响应时间 < 30秒

### 资源使用
- [ ] 内存使用正常
- [ ] CPU使用正常
- [ ] 磁盘空间充足

### 网络连接
- [ ] 外部访问正常
- [ ] 内部服务通信正常
- [ ] Dify服务连接正常

## 🚨 问题排查

### 常见问题
- [ ] 端口冲突问题解决
- [ ] CORS问题解决
- [ ] 超时问题解决
- [ ] 服务监听地址问题解决

### 日志检查
- [ ] 后端日志正常 (`backend.log`)
- [ ] 前端日志正常 (`frontend.log`)
- [ ] Nginx日志正常
- [ ] 系统日志无错误

### 监控设置
- [ ] 服务状态监控
- [ ] 错误日志监控
- [ ] 性能指标监控

## 📊 部署完成确认

### 最终验证
- [ ] 所有服务正常运行
- [ ] 所有功能正常工作
- [ ] 性能指标达标
- [ ] 监控系统正常

### 文档更新
- [ ] 部署文档更新
- [ ] 配置文档更新
- [ ] 故障排除文档更新

### 团队通知
- [ ] 部署完成通知
- [ ] 访问地址提供
- [ ] 使用说明提供

## 🔄 后续维护

### 定期检查
- [ ] 服务状态检查 (每日)
- [ ] 日志文件检查 (每周)
- [ ] 性能指标检查 (每月)
- [ ] 安全更新检查 (每月)

### 备份策略
- [ ] 代码备份
- [ ] 配置备份
- [ ] 数据库备份
- [ ] 日志备份

### 更新流程
- [ ] 代码更新流程
- [ ] 配置更新流程
- [ ] 服务重启流程
- [ ] 回滚流程

---

## 📝 部署记录

**部署时间**: ___________
**部署人员**: ___________
**版本号**: ___________
**服务器IP**: ___________
**访问地址**: ___________

**部署状态**: 
- [ ] 成功
- [ ] 部分成功
- [ ] 失败

**备注**: 
_________________________________
_________________________________
_________________________________

**下次部署建议**:
_________________________________
_________________________________
_________________________________
